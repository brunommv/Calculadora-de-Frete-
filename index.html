<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Importação e Revenda</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            transition: background-color 0.3s ease;
        }
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
    </style>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const InputField = ({ label, value, onChange, prefix = "R$", isDark }) => (
            <div className="flex flex-col gap-1.5">
                <label className={`text-[10px] font-black uppercase tracking-[0.15em] ${isDark ? 'text-slate-500' : 'text-slate-400'}`}>
                    {label}
                </label>
                <div className="relative group">
                    {prefix && (
                        <span className={`absolute left-4 top-1/2 -translate-y-1/2 font-bold text-sm transition-colors ${isDark ? 'text-slate-500 group-focus-within:text-indigo-400' : 'text-slate-400 group-focus-within:text-indigo-500'}`}>
                            {prefix}
                        </span>
                    )}
                    <input
                        type="number"
                        value={value || ''}
                        onChange={(e) => onChange(parseFloat(e.target.value) || 0)}
                        className={`w-full ${prefix ? 'pl-11' : 'px-4'} pr-4 py-3 rounded-2xl border outline-none transition-all placeholder-slate-400 
                            ${isDark 
                                ? 'border-slate-800 bg-slate-900/50 text-white focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10' 
                                : 'border-slate-200 bg-white text-slate-900 focus:border-indigo-500 focus:ring-4 focus:ring-indigo-500/10 shadow-sm'}`}
                        placeholder="0.00"
                    />
                </div>
            </div>
        );

        const App = () => {
            const [isDark, setIsDark] = useState(true);
            const [currency, setCurrency] = useState('ARS'); 
            const [exchangeRate, setExchangeRate] = useState(270);
            const [wineCostInput, setWineCostInput] = useState(0); 
            const [boxes, setBoxes] = useState(1);
            const [bottlesPerBox, setBottlesPerBox] = useState(6);
            const [intlFreight, setIntlFreight] = useState(40); 
            const [localFreight, setLocalFreight] = useState(65);
            const [salePrice, setSalePrice] = useState(0);

            // Cálculos
            const wineCostBRL = currency === 'BRL' ? wineCostInput : (wineCostInput / (exchangeRate || 1));
            const totalBottles = boxes * bottlesPerBox;
            const slotsUsed = Math.ceil(boxes / 3);
            const totalIntlFreight = slotsUsed * intlFreight;
            const totalFreight = totalIntlFreight + localFreight;
            const costPerBottleFreight = totalBottles > 0 ? totalFreight / totalBottles : 0;
            const finalCostPerBottle = wineCostBRL + costPerBottleFreight;
            const profitPerBottle = salePrice > 0 ? salePrice - finalCostPerBottle : 0;
            const totalProfit = profitPerBottle * totalBottles;
            const margin = salePrice > 0 ? (profitPerBottle / salePrice) * 100 : 0;
            const roi = finalCostPerBottle > 0 ? (profitPerBottle / finalCostPerBottle) * 100 : 0;

            useEffect(() => {
                document.body.style.backgroundColor = isDark ? '#020617' : '#f8fafc';
                if (window.lucide) window.lucide.createIcons();
            }, [isDark, currency, wineCostInput, boxes, salePrice]);

            return (
                <div className={`min-h-screen p-4 md:p-10 max-w-6xl mx-auto transition-colors duration-300 ${isDark ? 'text-slate-200' : 'text-slate-800'}`}>
                    
                    <header className={`mb-12 flex flex-col md:flex-row md:items-center justify-between gap-6 border-b pb-10 ${isDark ? 'border-slate-900' : 'border-slate-200'}`}>
                        <div className="flex items-center gap-5">
                            <div className="bg-gradient-to-br from-indigo-500 to-indigo-700 p-4 rounded-[1.25rem] shadow-2xl shadow-indigo-500/20">
                                <i data-lucide="calculator" className="text-white w-7 h-7"></i>
                            </div>
                            <div>
                                <h1 className={`text-3xl font-black tracking-tight ${isDark ? 'text-white' : 'text-slate-900'}`}>Import Calc</h1>
                                <p className={`text-[10px] font-black uppercase tracking-widest mt-0.5 ${isDark ? 'text-slate-500' : 'text-slate-400'}`}>Gestão de Margens & Custos</p>
                            </div>
                        </div>
                        
                        <div className="flex items-center gap-4">
                            {/* Botão de Tema */}
                            <button 
                                onClick={() => setIsDark(!isDark)}
                                className={`p-3 rounded-xl border transition-all ${isDark ? 'bg-slate-900 border-slate-800 text-yellow-400 hover:bg-slate-800' : 'bg-white border-slate-200 text-indigo-600 hover:bg-slate-50 shadow-sm'}`}
                            >
                                <i data-lucide={isDark ? "sun" : "moon"} className="w-5 h-5"></i>
                            </button>

                            <div className={`flex p-1.5 rounded-2xl border backdrop-blur-md ${isDark ? 'bg-slate-900/80 border-slate-800' : 'bg-white/80 border-slate-200 shadow-sm'}`}>
                                <button 
                                    onClick={() => setCurrency('BRL')}
                                    className={`px-4 py-2 text-[10px] font-black rounded-xl transition-all ${currency === 'BRL' ? 'bg-indigo-600 text-white shadow-lg' : 'text-slate-500 hover:text-slate-400'}`}
                                >
                                    COMPRA R$
                                </button>
                                <button 
                                    onClick={() => setCurrency('ARS')}
                                    className={`px-4 py-2 text-[10px] font-black rounded-xl transition-all ${currency === 'ARS' ? 'bg-indigo-600 text-white shadow-lg' : 'text-slate-500 hover:text-slate-400'}`}
                                >
                                    COMPRA ARS
                                </button>
                            </div>
                        </div>
                    </header>

                    <div className="grid lg:grid-cols-3 gap-8">
                        
                        <div className="space-y-6">
                            <div className={`p-8 rounded-[2rem] border backdrop-blur-sm ${isDark ? 'bg-slate-900/30 border-slate-800/50' : 'bg-white border-slate-100 shadow-sm'}`}>
                                <h2 className="text-xs font-black text-indigo-500 uppercase tracking-widest mb-8 flex items-center gap-2">
                                    <i data-lucide="coins" className="w-4 h-4"></i> Custo de Origem
                                </h2>
                                <div className="space-y-6">
                                    {currency === 'ARS' && (
                                        <InputField label="Cotação do dia" value={exchangeRate} onChange={setExchangeRate} prefix="" isDark={isDark} />
                                    )}
                                    <InputField label={`Valor Garrafa (${currency})`} value={wineCostInput} onChange={setWineCostInput} prefix={currency === 'BRL' ? 'R$' : '$'} isDark={isDark} />
                                </div>
                            </div>

                            <div className={`p-8 rounded-[2rem] border backdrop-blur-sm ${isDark ? 'bg-slate-900/30 border-slate-800/50' : 'bg-white border-slate-100 shadow-sm'}`}>
                                <h2 className="text-xs font-black text-indigo-500 uppercase tracking-widest mb-8 flex items-center gap-2">
                                    <i data-lucide="package" className="w-4 h-4"></i> Logística
                                </h2>
                                <div className="space-y-6">
                                    <div className="grid grid-cols-2 gap-4">
                                        <InputField label="Caixas" value={boxes} onChange={setBoxes} prefix="" isDark={isDark} />
                                        <InputField label="Un./Caixa" value={bottlesPerBox} onChange={setBottlesPerBox} prefix="" isDark={isDark} />
                                    </div>
                                    <InputField label="Frete Intl" value={intlFreight} onChange={setIntlFreight} isDark={isDark} />
                                    <InputField label="Frete Local" value={localFreight} onChange={setLocalFreight} isDark={isDark} />
                                </div>
                            </div>
                        </div>

                        <div className="space-y-6">
                            <div className={`p-10 rounded-[2.5rem] shadow-2xl relative overflow-hidden transition-colors ${isDark ? 'bg-white' : 'bg-slate-900'}`}>
                                <div className="relative z-10 text-center">
                                    <p className={`text-[10px] font-black uppercase tracking-[0.2em] mb-4 ${isDark ? 'text-slate-400' : 'text-slate-500'}`}>Custo Total / Un.</p>
                                    <h2 className={`text-7xl font-black mb-2 tracking-tighter ${isDark ? 'text-slate-900' : 'text-white'}`}>
                                        {finalCostPerBottle.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}
                                    </h2>
                                    <div className={`mt-10 pt-8 border-t flex justify-between text-xs font-bold px-2 ${isDark ? 'border-slate-100' : 'border-slate-800'}`}>
                                        <div className="text-left">
                                            <p className="text-slate-400 uppercase mb-1">Vinho</p>
                                            <p className={isDark ? 'text-slate-900' : 'text-white'}>{wineCostBRL.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>
                                        </div>
                                        <div className="text-right">
                                            <p className="text-slate-400 uppercase mb-1">Frete</p>
                                            <p className="text-rose-500">+{costPerBottleFreight.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className={`p-10 rounded-[2.5rem] border backdrop-blur-sm ${isDark ? 'bg-slate-900/30 border-slate-800/50' : 'bg-white border-slate-100 shadow-sm'}`}>
                                <h2 className="text-xs font-black text-indigo-500 uppercase tracking-widest mb-8 flex items-center gap-2">
                                    <i data-lucide="tag" className="w-4 h-4"></i> Venda
                                </h2>
                                <InputField label="Preço de Venda Final" value={salePrice} onChange={setSalePrice} isDark={isDark} />
                                <div className="grid grid-cols-2 gap-4 mt-8">
                                    <div className={`p-5 rounded-2xl border ${isDark ? 'bg-slate-900 border-slate-800' : 'bg-slate-50 border-slate-100'}`}>
                                        <p className="text-[10px] text-slate-500 font-bold uppercase mb-1">Margem</p>
                                        <p className="text-2xl font-black text-indigo-500">{margin.toFixed(1)}%</p>
                                    </div>
                                    <div className={`p-5 rounded-2xl border ${isDark ? 'bg-slate-900 border-slate-800' : 'bg-slate-50 border-slate-100'}`}>
                                        <p className="text-[10px] text-slate-500 font-bold uppercase mb-1">ROI</p>
                                        <p className={`text-2xl font-black ${isDark ? 'text-white' : 'text-slate-900'}`}>{roi.toFixed(0)}%</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="space-y-6">
                            <div className="bg-emerald-500 p-10 rounded-[2.5rem] shadow-xl shadow-emerald-500/10">
                                <p className="text-emerald-100/60 text-[10px] font-black uppercase tracking-[0.2em] mb-4">Lucro Líquido / Un.</p>
                                <h2 className="text-7xl font-black text-white tracking-tighter">
                                    {profitPerBottle.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}
                                </h2>
                            </div>

                            <div className="bg-indigo-600 p-10 rounded-[2.5rem] shadow-xl shadow-indigo-500/10 relative overflow-hidden group">
                                <div className="absolute -bottom-6 -right-6 opacity-20">
                                    <i data-lucide="trending-up" className="w-40 h-40 text-indigo-900"></i>
                                </div>
                                <div className="relative z-10">
                                    <p className="text-indigo-200 text-[10px] font-black uppercase tracking-[0.2em] mb-4 text-center text-indigo-100/70">Lucro Total Lote</p>
                                    <h2 className="text-6xl font-black text-white text-center tracking-tighter mb-8">
                                        {totalProfit.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}
                                    </h2>
                                    <div className="space-y-3 bg-indigo-700/50 p-6 rounded-3xl border border-indigo-400/20">
                                        <div className="flex justify-between text-xs font-bold text-indigo-50/70">
                                            <span>Investimento:</span>
                                            <span className="text-white">{(finalCostPerBottle * totalBottles).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>
                                        </div>
                                        <div className="flex justify-between text-xs font-bold text-indigo-50/70">
                                            <span>Faturamento:</span>
                                            <span className="text-white">{(salePrice * totalBottles).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>